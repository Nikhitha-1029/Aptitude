<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Aptitude Quiz Challenge</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(135deg, #1f1c2c, #928dab);
    color: #fff;
    font-family: 'Segoe UI', sans-serif;
    text-align: center;
  }
  .container {
    max-width: 800px;
    margin: auto;
    padding: 40px 20px;
  }
  .intro, .quiz, .end {
    display: none;
  }
  .show {
    display: block;
  }
  h1 {
    font-size: 40px;
    margin-bottom: 10px;
    animation: fadeIn 1.2s ease;
  }
  .btn {
    padding: 12px 25px;
    margin-top: 20px;
    font-size: 18px;
    background: #ffc107;
    color: #000;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: transform 0.2s;
  }
  .btn:hover {
    transform: scale(1.05);
  }
  .rules {
    margin-top: 20px;
    text-align: left;
    background: rgba(255,255,255,0.1);
    padding: 20px;
    border-radius: 10px;
    font-size: 16px;
    line-height: 1.5;
  }
  .question-box {
    background-color: rgba(0, 0, 0, 0.7);
    padding: 30px;
    border-radius: 15px;
    margin-top: 30px;
    animation: fadeIn 0.5s ease;
  }
  #options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 10px;
    margin-top: 20px;
  }
  .option {
    background-color: #444;
    padding: 12px;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.3s;
    word-break: break-word;
  }
  .option:hover {
    background-color: #666;
  }
  .correct {
    background-color: green !important;
    animation: pulse 0.5s ease;
  }
  .wrong {
    background-color: red !important;
    animation: shake 0.4s ease;
  }
  #prevBtn, #nextBtn, #solutionBtn {
    display: none;
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 16px;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  #prevBtn { 
    background: #9e9e9e; 
    margin-right: 10px;
  }
  #nextBtn { background: #2196f3; }
  #solutionBtn { background: #4caf50; margin-left: 10px; }
  #level-title { font-size: 24px; margin-top: 10px; }
  #timer { font-size: 20px; margin-top: 10px; color: #ff9800; }
  #solutionBox {
    margin-top: 20px;
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 10px;
    display: none;
  }
  #teamButtons {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 10px;
  }
  .team-btn {
    padding: 10px 20px;
    border-radius: 5px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    background-color: #ff5722;
    color: #fff;
    transition: transform 0.2s;
  }
  .team-btn:hover {
    transform: scale(1.05);
  }
  .active-team {
    background-color: #4caf50 !important;
  }
  #teamTimer {
    margin-top: 10px;
    font-size: 16px;
    color: #00ffea;
  }
  .team-members {
    margin-top: 30px;
    font-size: 18px;
    line-height: 1.6;
    animation: fadeIn 2s ease;
  }
  .thank-you {
    font-size: 36px;
    margin-top: 30px;
    animation: bounce 1s infinite alternate;
  }
  @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
  @keyframes shake { 0% {transform: translateX(0);} 25% {transform: translateX(-5px);} 50% {transform: translateX(5px);} 75% {transform: translateX(-5px);} 100% {transform: translateX(0);} }
  @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);} }
  @keyframes bounce {
    from { transform: translateY(0); }
    to { transform: translateY(-20px); }
  }
</style>
</head>
<body>

<div class="container">
  <!-- Intro Page -->
  <div class="intro show" id="introScreen">
    <h1>üß† Aptitude Challenge üéâ</h1>
    <p>Test your logical reasoning, math, and problem-solving skills in 3 exciting levels!</p>
    <button class="btn" onclick="startGame()">Start Game</button>

    <!-- Rules Section -->
    <div class="rules">
      <h3>Rules & Regulations:</h3>
      <ol>
        <li>The quiz has 3 levels: Easy, Medium, and Hard.</li>
        <li>Each question has a time limit of 20 seconds.</li>
        <li>Teams: Team A, Team B, and Team C will compete.</li>
        <li>Click your team button to register your answer time. Only the first clicked team will be recorded.</li>
        <li>You can view the solution after attempting the question.</li>
        <li>Advance through questions by clicking "Next Question".</li>
        <li>The team with the quickest correct answers wins!</li>
        <li>Points: Easy - 2points, Medium - 3points, Hard - 5points</li>
      </ol>
    </div>
  </div>

  <!-- Quiz Page -->
  <div class="quiz" id="quizScreen">
    <h2 id="level-title">Level: Easy</h2>
    <div id="timer">‚è≥ Time left: 30s</div>
    <div class="question-box">
      <h2 id="question">Question appears here...</h2>
      <div id="options"></div>
      <div id="solutionBox"></div>
      <button id="prevBtn" onclick="loadPreviousQuestion()">Previous Question</button>
      <button id="solutionBtn" onclick="showSolution()">Show Solution</button>
      <button id="nextBtn" onclick="loadNextQuestion()">Next Question</button>
      <div id="teamButtons">
        <button class="team-btn" onclick="selectTeam(this)">Team A</button>
        <button class="team-btn" onclick="selectTeam(this)">Team B</button>
        <button class="team-btn" onclick="selectTask(this)">Team C</button>
      </div>
      <div id="teamTimer"></div>
    </div>
  </div>

  <!-- End Screen -->
  <div class="end" id="endScreen">
    <h2>üéâ Congratulations! You've completed the Aptitude Quiz! üéâ</h2>
    <div class="team-members">
      <h3>Team Members:</h3>
      <p>Naveen Kumar J</p>
      <p>Nikitha N</p>
      <p>Saran S</p>
      <p>SK Surya</p>
      <p>Sreerag</p>
    </div>
    <div class="thank-you">Thank You!</div>
    <canvas id="confettiCanvas"></canvas>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
const questionsByLevel = {
  Easy: [
    { question: "If 2 cats catch 2 mice in 2 minutes, how many cats are needed to catch 20 mice in 20 minutes?", options: ["2", "4", "10", "20"], answer: "2", solution: "Rate per cat = 1 mouse in 2 minutes. In 20 minutes, 1 cat catches 10 mice, so 2 cats catch 20 mice." },
    { question: "Find the missing number: 3, 9, 27, 81, ?", options: ["162", "243", "324", "729"], answer: "243", solution: "Each term is multiplied by 3." },
    { question: "Which is heavier: 1 kg of cotton or 1 kg of iron?", options: ["Cotton", "Iron", "Same weight", "Depends"], answer: "Same weight", solution: "Both are exactly 1 kg in weight." },
    { question: "Three friends are wearing shirts of different colors: red, blue, and green. Raj is not wearing red. Sameer is wearing blue. Who is wearing green?", options: ["Prem", "Raj", "Akash", "Kevin"], answer: "Raj", solution: "Raj ‚â† red, Sameer = blue ‚Üí Remaining color green must be Raj." },
    { question: "While looking at a picture, Mohan says, Brothers and sisters I have none, but the father of that man is my father's son. Who is the man in the picture?", options: ["Brother", "Nephew", "Mohan Himself", "Mohan's Son"], answer: "Mohan Himself", solution: "My father's son = Mohan himself (since he has no brothers). So the father of the man in the picture is Mohan ‚áí the man is his own son." }
  ],
  Medium: [
    { question: "If SKY = 55, FUN = 41, what is JOB?", options: ["46", "32", "51", "19"], answer: "32", solution: "S(19)+K(11)+Y(25)=55, F(6)+U(21)+N(14)=41, JOB=J(10)+O(15)+B(2)=27+5 constant =32" },
    { question: "If you buy a shirt for ‚Çπ97 and pay with ‚Çπ100, the shopkeeper gives ‚Çπ3 change. How much money did the shopkeeper lose if the ‚Çπ100 note was fake?", options: ["‚Çπ3", "‚Çπ97", "‚Çπ100", "‚Çπ103"], answer: "‚Çπ100", solution: "The shopkeeper gave goods worth ‚Çπ97 and ‚Çπ3 change = total ‚Çπ100 loss." },
    { question: "In a race, you overtake the person in 2nd place. What position are you in now?", options: ["1st", "2nd", "3rd", "Depends"], answer: "2nd", solution: "You take the position of the person you overtake ‚Äî 2nd place." },
    { question: "Odd-One-Out - 4, 9, 16, 25, 36, 50, 64", options: ["9", "64", "50", "16"], answer: "50", solution: "All are perfect squares except 50." },
    { question: "In a family of 6: P, Q, R, S, T, U. P is father of R but not husband of Q, S is brother of P, T is daughter of R, U is mother of T.", options: ["Mother", "Grandmother", "Sister-in-law", "Daughter"], answer: "Grandmother", solution: "P father of R, but Q not wife of P ‚Üí Q is wife of S. Since T is R's daughter, U is mother, so Q becomes grandmother." }
  ],
  Hard: [
    { question: "B is the sister of A. C is the husband of B. D is the brother of C. How is D related to A?", options: ["Brother", "Brother-in-law", "Cousin", "Nephew"], answer: "Brother-in-law", solution: "D is husband's brother of A's sister ‚Üí A's brother-in-law" },
    { question: "A train covers 120 km in 2 hours and then 180 km in 3 hours. What's its average speed?", options: ["40 km/h", "60 km/h", "80 km/h", "100 km/h"], answer: "60 km/h", solution: "Total distance = 120 + 180 = 300 km. Total time = 2 + 3 = 5 hours. Average speed = total distance √∑ total time = 300 √∑ 5 = 60 km/h." },
    { question: "A train leaves at 3 PM and arrives at 5 PM. Another train leaves at 4 PM and arrives at 6 PM. Which train is closer to the destination at 5 PM?", options: ["First train", "Second train", "Both same", "Cannot say"], answer: "Second train", solution: "At 5 PM, first train has reached the destination, second train is still on the way. So the Second train is closer to the destination." },
    { question: "IF B=2, C=3, E=5, G=7, ?. Find the next equation.", options: ["I=7", "L=13", "K=11", "H=12"], answer: "K=11", solution: "The numerical value of the letter is the Sequence of the Prime Numbers" },
    { question: "Two fathers and two sons enter a shop and buy 3 hats for ‚Çπ30. Each hat costs ‚Çπ10. How is this Possible?", options: ["They got a discount", "They shared hats", "They are three people", "Shop made a mistake"], answer: "They are three people", solution: "They are grandfather, father, and son ‚Äî three people. The grandfather and father are the two fathers, and the father and son are the two sons." }
  ],
  Fun: [
    { question: "Why was the Maths book looks so sad?", options: ["Think about it and click Show Solution"], answer: "Because it had too many problems", solution: "Math books are filled with math problems, which can make them seem 'sad'." },
    { question: "What has a head, a tail, but no body?", options: ["Think about it and click Show Solution"], answer: "A coin", solution: "A coin has a head (front side) and a tail (back side) but no physical body." },
    { question: "Which month has 28 days?", options: ["Think about it and click Show Solution"], answer: "Every Month has 28 days", solution: "All months have at least 28 days, though February is the only one that stops there in non-leap years." },
    { question: "You see a boat filled with people, but there isn't a single person on board. How is that possible?", options: ["Think about it and click Show Solution"], answer: "Because all are Married", solution: "The word 'single' can mean unmarried, so if everyone is married, there isn't a 'single' (unmarried) person on board." },
    { question: "What can be cracked, made, told, and played?", options: ["Think about it and click Show Solution"], answer: "A Joke", solution: "You crack a joke, make a joke, tell a joke, and play a joke on someone." }
  ],
};

let levels = ["Easy", "Medium", "Hard", "Fun"];
let currentLevelIndex = 0;
let currentQuestionIndex = 0;
let currentLevelQuestions = questionsByLevel[levels[currentLevelIndex]];
let timerInterval;
let timeLeft = 30;
let lastAnswerCorrect = true;
let timerEnded = false;
let startTime = 0;

function startGame() {
  document.getElementById("introScreen").classList.remove("show");
  document.getElementById("quizScreen").classList.add("show");
  loadQuestion();
}

function startTimer() {
  timeLeft = 30;
  timerEnded = false;
  startTime = Date.now();
  document.getElementById("timer").innerText = `‚è≥ Time left: ${timeLeft}s`;
  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").innerText = `‚è≥ Time left: ${timeLeft}s`;
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      timerEnded = true;
      disableOptions();
      document.getElementById('solutionBtn').style.display = 'inline-block';
      document.getElementById('nextBtn').style.display = 'inline-block';
    }
  }, 1000);
}

function disableOptions() {
  document.querySelectorAll('.option').forEach(opt => opt.onclick = null);
}

function loadQuestion() {
  clearInterval(timerInterval);
  document.getElementById('solutionBox').style.display = 'none';
  document.getElementById('solutionBox').innerText = '';
  document.getElementById('solutionBtn').style.display = 'none';
  document.getElementById('nextBtn').style.display = 'none';
  
  // Show/hide previous button based on position
  if (currentQuestionIndex > 0 || currentLevelIndex > 0) {
    document.getElementById('prevBtn').style.display = 'inline-block';
  } else {
    document.getElementById('prevBtn').style.display = 'none';
  }
  
  document.getElementById('level-title').innerText = `Level: ${levels[currentLevelIndex]}`;
  let q = currentLevelQuestions[currentQuestionIndex];
  document.getElementById('question').innerText = `Q${currentQuestionIndex + 1}: ${q.question}`;
  let optionsDiv = document.getElementById('options');
  optionsDiv.innerHTML = '';
  
  // For Fun level, show a prompt to use the solution button
  if (levels[currentLevelIndex] === "Fun") {
    q.options.forEach(option => {
      let btn = document.createElement('div');
      btn.classList.add('option');
      btn.innerText = option;
      btn.onclick = () => {
        // For Fun level, just show the solution button when any option is clicked
        document.getElementById('solutionBtn').style.display = 'inline-block';
        document.getElementById('nextBtn').style.display = 'inline-block';
        disableOptions();
      };
      optionsDiv.appendChild(btn);
    });
    
    // For Fun level, show the solution button immediately
    document.getElementById('solutionBtn').style.display = 'inline-block';
    document.getElementById('nextBtn').style.display = 'inline-block';
  } else {
    // For other levels, use the normal behavior
    q.options.forEach(option => {
      let btn = document.createElement('div');
      btn.classList.add('option');
      btn.innerText = option;
      btn.onclick = () => checkAnswer(btn, q.answer);
      optionsDiv.appendChild(btn);
    });
  }

  // Reset team buttons
  const teamBtns = document.querySelectorAll('.team-btn');
  teamBtns.forEach(btn => {
    btn.style.display = 'inline-block';
    btn.classList.remove('active-team');
    btn.onclick = () => selectTeam(btn);
  });

  document.getElementById('teamTimer').innerText = '';
  startTimer();
}

function loadPreviousQuestion() {
  // Decrement question index
  currentQuestionIndex--;
  
  // If we've gone below 0, go to previous level
  if (currentQuestionIndex < 0) {
    // If we're already at the first question of the first level, do nothing
    if (currentLevelIndex === 0) {
      currentQuestionIndex = 0;
      return;
    }
    
    // Go to previous level
    currentLevelIndex--;
    currentLevelQuestions = questionsByLevel[levels[currentLevelIndex]];
    currentQuestionIndex = currentLevelQuestions.length - 1;
  }
  
  // Load the previous question
  loadQuestion();
}

function checkAnswer(selectedOption, correctAnswer) {
  clearInterval(timerInterval);
  disableOptions();
  if (selectedOption.innerText === correctAnswer) {
    selectedOption.classList.add('correct');
    lastAnswerCorrect = true;
    launchConfetti();
  } else {
    selectedOption.classList.add('wrong');
    lastAnswerCorrect = false;
    document.getElementById('solutionBtn').style.display = 'inline-block';
  }
  document.getElementById('nextBtn').style.display = 'inline-block';
}

function showSolution() {
  let q = currentLevelQuestions[currentQuestionIndex];
  document.getElementById('solutionBox').innerText = `üí° Solution: ${q.solution}`;
  document.getElementById('solutionBox').style.display = 'block';
  document.getElementById('solutionBtn').style.display = 'none';
}

function loadNextQuestion() {
  currentQuestionIndex++;
  if (currentQuestionIndex < currentLevelQuestions.length) {
    loadQuestion();
  } else if (currentLevelIndex < levels.length - 1) {
    currentLevelIndex++;
    currentLevelQuestions = questionsByLevel[levels[currentLevelIndex]];
    currentQuestionIndex = 0;
    loadQuestion();
  } else {
    document.getElementById("quizScreen").classList.remove("show");
    document.getElementById("endScreen").classList.add("show");
    launchConfetti(true);
  }
}

function launchConfetti(fullScreen = false) {
  if (fullScreen) {
    confetti({ particleCount: 200, spread: 120, origin: { y: 0.6 } });
    // Continue confetti for celebration
    const duration = 3000;
    const animationEnd = Date.now() + duration;
    const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

    function randomInRange(min, max) {
      return Math.random() * (max - min) + min;
    }

    const interval = setInterval(function() {
      const timeLeft = animationEnd - Date.now();

      if (timeLeft <= 0) {
        return clearInterval(interval);
      }

      const particleCount = 50 * (timeLeft / duration);
      confetti({
        ...defaults,
        particleCount,
        origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
      });
      confetti({
        ...defaults,
        particleCount,
        origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
      });
    }, 250);
  }
  else confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
}

// Team button logic with timer - Updated to show 2 decimal places
function selectTeam(btn) {
  btn.classList.add('active-team');
  const teamBtns = document.querySelectorAll('.team-btn');
  teamBtns.forEach(b => {
    if (b !== btn) b.style.display = 'none';
  });
  
  // Calculate time with 2 decimal places
  const elapsedTime = (Date.now() - startTime) / 1000;
  const formattedTime = elapsedTime.toFixed(2);
  
  document.getElementById('teamTimer').innerText = `‚è± ${btn.innerText} clicked at ${formattedTime}s`;
}
</script>

</body>
</html>
